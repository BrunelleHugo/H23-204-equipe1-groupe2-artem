// @dart=2.9

import 'dart:async';
import 'dart:core';
import 'dart:html' as html;
import 'dart:html';
import 'dart:math' as math;
import 'dart:ui' as ui;

import 'package:firebase_core/firebase_core.dart';
import 'firebase_options.dart';
import 'package:firebase_database/firebase_database.dart';
import 'package:html/parser.dart' as parser;
import 'package:http/http.dart' as http;
import 'package:flutter/material.dart';
import 'package:palette_generator/palette_generator.dart';

void main() async {
  WidgetsFlutterBinding.ensureInitialized();
  await Firebase.initializeApp(
    options: DefaultFirebaseOptions.currentPlatform,
  );
  runApp(MaterialApp(
      theme: ThemeData(
        scaffoldBackgroundColor: Colors.green[100],
        primaryColor: Colors.green,
        colorScheme: ColorScheme.fromSwatch().copyWith(secondary: Colors.green),
      ),
      home: const MyApp()));
}

class MyApp extends StatefulWidget {
  const MyApp({Key key}) : super(key: key);

  @override
  _MyAppState createState() => _MyAppState();
}

class _MyAppState extends State<MyApp> {
// Strings to store the extracted Article titles
  String result1 = 'Result 1';

// boolean to show CircularProgressIndication
// while Web Scraping awaits
  bool isLoading = false;

  List<int> users = [
    25901,
    51,
    30201,
    7501,
    17901,
    42401,
    14901,
    14602,
    29752,
    10801,
    14151,
    14152,
    14154,
    16501,
    34901,
    34902,
    49701,
    301,
    302,
    25551,
    14851,
    18151,
    10651,
    25851,
    22151,
    22252,
    14301,
    8551,
    13701,
    13301,
    33801,
    34851,
    34751,
    34752,
    22751,
    8101,
    8102,
    6701,
    42651,
    25051,
    21301,
    15151,
    41701,
    1851,
    23352,
    19851,
    19853,
    19801,
    1501,
    1502,
    43201,
    10451,
    40951,
    24851,
    36251,
    36252,
    41951,
    23201,
    39051,
    7601,
    7602,
    46651,
    15601,
    15602,
    23401,
    31151,
    13351,
    13352,
    24201,
    24202,
    41303,
    34801,
    9351,
    48252,
    19751,
    15651,
    15652,
    30251,
    49402,
    9801,
    9803,
    12701,
    12702,
    12703,
    18401,
    48701,
    13451,
    10053,
    10054,
    8651,
    8652,
    16602,
    12951,
    5302,
    2602,
    2603,
    47551,
    47552,
    26851,
    26852,
    26855,
    19952,
    19954,
    19955,
    97951,
    82951,
    96151,
    90051,
    89751,
    81752,
    57451,
    96401,
    95451,
    82152,
    79451,
    50601,
    67951,
    77551,
    51151,
    70301,
    91451,
    88351,
    62801,
    90751,
    75351,
    54551,
    68602,
    71801,
    59001,
    84651,
    50651,
    89951,
    63101,
    70701,
    86651,
    84251,
    57301,
    61551,
    89651,
    58101,
    91301,
    66201,
    72551,
    75151,
    75152,
    86801,
    51051,
    63451,
    96101,
    87401,
    82601,
    63901,
    93701,
    88301,
    57752,
    67601,
    67603,
    63501,
    54951,
    54952,
    54953,
    58551,
    76351,
    87551,
    74901,
    74401,
    94702,
    88153,
    69801,
    69802,
    53801,
    64851,
    69151,
    78351,
    68452,
    61301,
    80551,
    80552,
    53201,
    71401,
    64151,
    94651,
    97302,
    82402,
    97452,
    83302,
    79701,
    93001,
    93002,
    93003,
    92201,
    92202,
    84602,
    84001,
    90001,
    72951,
    64501,
    65351,
    93551,
    93552,
    95251,
    95101,
    95102,
    60051,
    60052,
    66551,
    91701,
    91702,
    91703,
    67102,
    93251,
    73601,
    73602,
    77653,
    61902,
    76601,
    87201,
    77801,
    64801,
    87451,
    87452,
    87453,
    87454,
    65651,
    65652,
    60351,
    60352,
    65401,
    65402,
    65403,
    92001,
    81601,
    81602,
    81603,
    78201,
    78203,
    94102,
    69251,
    69252,
    87351,
    146001,
    127751,
    149101,
    123751,
    126501,
    149801,
    100851,
    122251,
    144651,
    130651,
    121601,
    148101,
    132051,
    127351,
    125101,
    148351,
    102301,
    115951,
    115952,
    115953,
    149851,
    118101,
    149501,
    115351,
    148651,
    119702,
    121401,
    146401,
    122901,
    135851,
    117701,
    140601,
    121101,
    143751,
    143752,
    144451,
    121651,
    115851,
    115852,
    133651,
    148751,
    115601,
    103502,
    115151,
    120151,
    146651,
    148802,
    146001,
    127751,
    149101,
    123751,
    126501,
    149801,
    100851,
    122251,
    144651,
    130651,
    121601,
    148101,
    132051,
    127351,
    125101,
    148351,
    102301,
    115951,
    115952,
    115953,
    149851,
    118101,
    149501,
    115351,
    148651,
    119702,
    121401,
    146401,
    122901,
    135851,
    117701,
    140601,
    121101,
    143751,
    143752,
    144451,
    121651,
    115851,
    115852,
    133651,
    148751,
    115601,
    103502,
    115151,
    120151,
    146651,
    148802,
    169051,
    155001,
    150851,
    175553,
    159301,
    161052,
    161851,
    162201,
    174751,
    176051,
    176053,
    155252,
    166302,
    175002,
    175003,
    175004,
    155201,
    165151,
    175652,
    175653,
    160201,
    154752,
    154753,
    154754,
    152501,
    152502,
    184153,
    161001,
    161002,
    161003,
    195651,
    163153,
    185957,
    176152,
    176155,
    182153,
    175154,
    175156,
    175158,
    175159,
    181857,
    181863,
    181864,
    174052,
    174054,
    174055,
    174056,
    174059,
    174060,
    171413,
    171417,
    171418,
    167121,
    196103,
    196109,
    182951,
    182974,
    164851,
    164854,
    164865,
    164867,
    164871,
    164876,
    212551,
    219203,
    236151,
    215556,
    236551,
    241802,
    210607,
    207003,
    207004,
    207006,
    207009,
    236057,
    238203,
    247951,
    220751,
    220755,
    229759,
    201353,
    201355,
    201357,
    231951,
    231957,
    234253,
    244354,
    244358,
    244359,
    206806,
    206810,
    206812,
    202151,
    202153,
    234569,
    206508,
    206511,
    206512,
    231702,
    231714,
    231717,
    217051,
    217057,
    217074,
    202416,
    202421,
    202430,
    205160,
    205177,
    231204,
    231211,
    231220,
    224985,
    224988,
    224990,
    224997,
    212121,
    213010,
    204762,
    204782,
    204783,
    204791,
    204796,
    285851,
    280951,
    283001,
    295651,
    274203,
    292201,
    292202,
    291951,
    262006,
    291802,
    283153,
    283154,
    283155,
    290851,
    290855,
    250351,
    250352,
    255703,
    293905,
    262406,
    299555,
    299557,
    284801,
    284807,
    285051,
    285058,
    285061,
    285062,
    285064,
    299357,
    299358,
    299359,
    285359,
    285364,
    278161,
    282853,
    282854,
    282855,
    282857,
    282859,
    282861,
    286901,
    286904,
    286906,
    286909,
    260917,
    267209,
    267212,
    267217,
    267219,
    257205,
    257214,
    299958,
    299963,
    299965,
    299967,
    299969,
    299970,
    264559,
    283251,
    283257,
    283263,
    283264,
    283265,
    283268,
    285576,
    274069,
    298951,
    298958,
    298963,
    298966,
    298974,
    264304,
    264306,
    264324,
    264344,
    264346,
    260569,
    310901,
    310902,
    301602,
    343902,
    348401,
    328703,
    313152,
    320301,
    349151,
    329502,
    313401,
    313402,
    327754,
    348751,
    348752,
    348754,
    348757,
    326851,
    328853,
    328855,
    344954,
    344153,
    344154,
    330552,
    311552,
    342002,
    342003,
    342004,
    342009,
    302303,
    302304,
    311801,
    311806,
    311811,
    314803,
    314809,
    314811,
    319703,
    345701,
    322951,
    343302,
    343304,
    343305,
    320704,
    320707,
    320711,
    320712,
    313502,
    322755,
    328053,
    328054,
    328058,
    328060,
    347603,
    347605,
    315652,
    315654,
    315656,
    315657,
    345602,
    340451,
    340455,
    340456,
    340461,
    311858,
    324251,
    324253,
    324255,
    341751,
    341753,
    341758,
    311958,
    311959,
    316301,
    316302,
    316303,
    316310,
    316311,
    322155,
    322156,
    322157,
    337301,
    337302,
    337306,
    337307,
    337312,
    338301,
    338303,
    338308,
    344405,
    344406,
    344411,
    348452,
    348453,
    348454,
    348458,
    348464,
    327701,
    327702,
    327705,
    327708,
    344351,
    344352,
    344355,
    344356,
    344357,
    344359,
    344363,
    339052,
    339062,
    328304,
    328305,
    328307,
    328309,
    328310,
    328311,
    327956,
    327964,
    323366,
    311303,
    311309,
    311312,
    311313,
    311315,
    342452,
    342457,
    342464,
    342466,
    309302,
    309305,
    324757,
    324758,
    324761,
    324764,
    313204,
    322102,
    322107,
    330315,
    330316,
    324802,
    324805,
    324807,
    324809,
    324810,
    300551,
    300559,
    300560,
    300565,
    344804,
    344806,
    344821,
    349551,
    349564,
    343104,
    343107,
    343108,
    343109,
    343113,
    343114,
    343116,
    343120,
    343123,
    337601,
    337608,
    337611,
    337612,
    337617,
    343655,
    343657,
    343658,
    343661,
    343663,
    343666,
    321902,
    321912,
    346706,
    346707,
    346708,
    346709,
    327355,
    327360,
    327361,
    327363,
    327372,
    315451,
    315455,
    315459,
    315463,
    315464,
    318968,
    318976,
    347459,
    347471,
    347478,
    345004,
    345008,
    345023,
    338104,
    338105,
    338106,
    338110,
    338111,
    338115,
    338116,
    338119,
    316802,
    316805,
    316807,
    316809,
    316815,
    344002,
    344003,
    344004,
    344007,
    344009,
    344012,
    344014,
    344020,
    344021,
    344024,
    306205,
    306229,
    325803,
    325805,
    325807,
    325814,
    325815,
    325825,
    325826,
    325827,
    325828,
    345205,
    345212,
    340301,
    340305,
    340312,
    340313,
    340320,
    340323,
    340328,
    340329,
    332361,
    324703,
    324704,
    324705,
    324716,
    324718,
    324720,
    324725,
    325057,
    325058,
    325062,
    325074,
    325075,
    325078,
    325079,
    325080,
    320279,
    320290,
    320292,
    320293,
    320294,
    320298,
    309251,
    309260,
    309262,
    309272,
    348105,
    348113,
    348116,
    348117,
    348120,
    348124,
    348125,
    348133,
    348135,
    348139,
    348143,
    302556,
    321137,
    321141,
    328657,
    328658,
    328666,
    328667,
    328673,
    328680,
    328684,
    328697,
    327051,
    327053,
    327055,
    327058,
    327063,
    327075,
    327078,
    327080,
    327082,
    327084,
    327086,
    327087,
    327091,
    327093,
    314901,
    314903,
    314906,
    314908,
    314911,
    314913,
    314916,
    314917,
    314920,
    314921,
    314923,
    314924,
    314937,
    314940,
    314949,
    334609,
    334628,
    335408,
    335411,
    335430,
    335436,
    323903,
    323907,
    323908,
    323909,
    323910,
    323923,
    323949,
    306553,
    306576,
    320971,
    320995,
    331206,
    331222,
    331231,
    331234,
    321329,
    304694,
    335501,
    335502,
    335509,
    335539,
    327402,
    327406,
    327407,
    327411,
    327416,
    327419,
    327426,
    327433,
    327434,
    327435,
    327436,
    327440,
    334569,
    334571,
    327209,
    327210,
    327216,
    327217,
    327219,
    327221,
    327222,
    327227,
    327238,
    327239,
    327242,
    327247,
    304312,
    304331,
    331957,
    330008,
    330019,
    330024,
    330026,
    330048,
    330406,
    330416,
    330417,
    330447,
    346011,
    346022,
    346038,
    336278,
    336299,
    350151,
    391351,
    391203,
    393151,
    390454,
    390456,
    392651,
    396602,
    396604,
    396605,
    396610,
    396611,
    350751,
    350752,
    350753,
    350756,
    350555,
    392504,
    393004,
    393005,
    352453,
    393501,
    393509,
    393451,
    393452,
    393454,
    393462,
    388208,
    388209,
    389901,
    389909,
    395803,
    395808,
    395810,
    394158,
    394162,
    394163,
    393901,
    393905,
    393910,
    393914,
    393916,
    390760,
    350401,
    350404,
    350407,
    350412,
    350417,
    389103,
    389106,
    389121,
    356966,
    392156,
    392160,
    392165,
    392167,
    391163,
    391173,
    391177,
    398051,
    398053,
    398054,
    398069,
    398070,
    389505,
    389506,
    389523,
    390304,
    390305,
    390313,
    390322,
    388910,
    391855,
    391856,
    391861,
    391862,
    391866,
    391871,
    391880,
    352948,
    352579,
    362597,
    381235,
    353987,
    389722,
    389727,
    352878,
    354109,
    385531,
    385536,
    357605,
    357640,
    366028,
    356921,
    356945,
    355882,
    355891,
    360031,
    361996,
    370897,
    373466,
    373481,
    396306,
    396311,
    396315,
    396319,
    396327,
    396329,
    396339,
    396342,
    396344,
    396348,
    396349,
    355008,
    355303,
    352740,
    391622,
    381591,
    367469,
    367491,
    358430,
    371002,
    371017,
    371042,
    353084,
    351203,
    351247,
    367337,
    367339,
    353510,
    389658,
    389667,
    389687,
    389694,
    426051,
    408801,
    449401,
    416851,
    407552,
    428702,
    402251,
    410801,
    419002,
    400501,
    423204,
    409102,
    428902,
    406403,
    401651,
    401652,
    403503,
    414253,
    420301,
    413352,
    414351,
    423701,
    413503,
    413053,
    400553,
    424153,
    424156,
    418102,
    404154,
    428751,
    428753,
    409853,
    427951,
    427953,
    427955,
    427956,
    417402,
    417403,
    412603,
    447905,
    425703,
    428051,
    428054,
    403807,
    414902,
    414907,
    414303,
    400701,
    400702,
    443404,
    403902,
    403906,
    410608,
    414657,
    416306,
    416308,
    416309,
    434202,
    434203,
    434204,
    428502,
    428504,
    428509,
    419852,
    428403,
    428404,
    428407,
    428410,
    422254,
    418004,
    405001,
    405006,
    417556,
    405359,
    430060,
    435754,
    411257,
    409901,
    409906,
    415210,
    406952,
    406956,
    420707,
    418456,
    418460,
    413104,
    413106,
    401904,
    401905,
    401907,
    401908,
    401911,
    420203,
    420212,
    420216,
    420217,
    411801,
    411806,
    411808,
    411810,
    417953,
    417955,
    419752,
    419754,
    419762,
    401259,
    426854,
    426862,
    419604,
    430008,
    419257,
    419264,
    449165,
    401103,
    401106,
    401111,
    401112,
    410107,
    410117,
    421965,
    421967,
    421968,
    425902,
    425904,
    425905,
    425906,
    425907,
    425908,
    425911,
    415413,
    427704,
    427705,
    427711,
    427717,
    400805,
    400810,
    438358,
    438359,
    436721,
    417160,
    417162,
    417163,
    417164,
    417165,
    417169,
    406059,
    433811,
    401001,
    401002,
    401003,
    401006,
    401009,
    401012,
    401014,
    401016,
    444669,
    406257,
    406268,
    410254,
    410258,
    410262,
    410269,
    410271,
    414455,
    414458,
    414460,
    414461,
    420103,
    420105,
    420115,
    405653,
    405669,
    419802,
    419803,
    419805,
    419806,
    419809,
    419810,
    418906,
    418914,
    418915,
    418916,
    418917,
    418918,
    418920,
    409511,
    409513,
    409517,
    409521,
    409523,
    426903,
    426904,
    426909,
    426911,
    426921,
    426928,
    426101,
    426102,
    426104,
    426105,
    426115,
    426119,
    426128,
    426131,
    429220,
    405118,
    405129,
    423453,
    423459,
    423469,
    423471,
    423472,
    423473,
    423476,
    403703,
    403705,
    403717,
    403719,
    403721,
    426008,
    426009,
    426020,
    418509,
    418516,
    433172,
    407057,
    407067,
    401452,
    401458,
    401459,
    401470,
    422485,
    420154,
    420156,
    420159,
    420160,
    420161,
    420170,
    420178,
    420187,
    408701,
    408709,
    408715,
    408717,
    408718,
    408726,
    408729,
    408735,
    424353,
    424359,
    424368,
    424371,
    424386,
    441604,
    401306,
    401308,
    401312,
    401316,
    401317,
    401320,
    401323,
    401324,
    401327,
    401329,
    401330,
    401333,
    401334,
    401335,
    403412,
    403415,
    403423,
    403427,
    403432,
    403435,
    403437,
    403438,
    403441,
    429701,
    429710,
    429721,
    429724,
    441918,
    441924,
    435666,
    405401,
    405418,
    405429,
    427255,
    427257,
    427262,
    427266,
    427276,
    427282,
    427286,
    427293,
    427298,
    443078,
    400603,
    400608,
    400614,
    400619,
    400620,
    400621,
    400624,
    400631,
    400633,
    400634,
    400636,
    427205,
    427206,
    427207,
    427214,
    427223,
    427224,
    427228,
    427242,
    434067,
    447015,
    447024,
    443369,
    443373,
    443379,
    433078,
    433081,
    435215,
    435218,
    425251,
    425263,
    425271,
    425277,
    425278,
    425288,
    437139,
    434112,
    434114,
    434127,
    434130,
    434141,
    434142,
    430553,
    430577,
    430599,
    409555,
    409557,
    409560,
    409569,
    409572,
    409578,
    421756,
    421778,
    421779,
    421794,
    421795,
    446903,
    446905,
    446912,
    405089,
    430992,
    446475,
    446478,
    446499,
    432202,
    432220,
    446093,
    431084,
    431099,
    407349,
    432784,
    449005,
    449008,
    449017,
    449036,
    449038,
    449043,
    431512,
    431520,
    431533,
    431546,
    434841,
    428953,
    428957,
    428958,
    428962,
    428975,
    413451,
    413458,
    413471,
    413472,
    413494,
    413496,
    413499,
    433330,
    448104,
    448111,
    448118,
    448120,
    448130,
    448137,
    436767,
    436778,
    440656,
    440665,
    440667,
    445248,
    446973,
    446976,
    429859,
    429873,
    439519,
    434410,
    434428,
    434446,
    410954,
    410958,
    410962,
    410964,
    410970,
    410976,
    410987,
    410991,
    410999,
    447302,
    421338,
    421349,
    407718,
    407735,
    407736,
    408404,
    408409,
    408411,
    408418,
    408424,
    408444,
    434155,
    434166,
    434169,
    436578,
    432504,
    432544,
    424102,
    424104,
    424106,
    424111,
    424129,
    424135,
    424138,
    424140,
    410651,
    410652,
    410653,
    410658,
    410670,
    410672,
    410674,
    410678,
    410680,
    435003,
    439349,
    412503,
    412504,
    412505,
    412512,
    412518,
    412523,
    412524,
    412527,
    412541,
    412542,
    445026,
    445039,
    429114,
    429118,
    429134,
    442838,
    433009,
    433021,
    447852,
    447853,
    447856,
    447857,
    447873,
    447875,
    447273,
    437562,
    437595,
    429344,
    409354,
    409358,
    409361,
    409368,
    409374,
    409375,
    409380,
    409385,
    409388,
    409392,
    415312,
    415333,
    415336,
    415338,
    415340,
    415341,
    415343,
    415347,
    443157,
    443176,
    452852,
    452869,
    453820,
    453833,
    476713,
    476720,
    460408,
    460423,
    460427,
    492046,
    494152,
    494158,
    514477,
    546313,
    524755,
    524787,
    543572,
    543579,
    542822,
    542835,
    542843,
    516288,
    549951,
    548011,
    548035,
    573655,
    582218,
    582222,
    572029,
    569265,
    582064,
    550517,
    550533,
    575506,
    575508,
    575532,
    575540,
    575542,
    575547,
    630604,
    649667,
    649678,
    622782,
    618188,
    618199,
    632836,
    647179,
    629407,
    610487,
    634816,
    614629,
    612242,
    635618,
    634474,
    634482,
    603758,
    633384,
    635469,
    635478,
    635493,
    635494,
    631883,
    622170,
    622183,
    614258,
    614260,
    614293,
    691101,
    678453,
    675952,
    693301,
    692752,
    699251,
    699252,
    699254,
    689203,
    689208,
    672851,
    678253,
    677201,
    677205,
    677208,
    684502,
    689310,
    650102,
    650108,
    650109,
    663755,
    663758,
    663759,
    663760,
    663761,
    693455,
    693457,
    693461,
    693462,
    671753,
    671754,
    671755,
    671756,
    671757,
    671759,
    678102,
    678105,
    678106,
    670555,
    670559,
    670560,
    670562,
    670563,
    670565,
    680204,
    680206,
    680207,
    680209,
    680210,
    680215,
    691459,
    691462,
    675302,
    675308,
    675311,
    675319,
    675321,
    675323,
    675324,
    696253,
    696256,
    696259,
    696261,
    696262,
    696263,
    696269,
    652903,
    652920,
    690804,
    690809,
    690810,
    690811,
    690816,
    690825,
    690827,
    690828,
    690829,
    690830,
    665752,
    665753,
    665758,
    665760,
    665761,
    665762,
    665770,
    665773,
    665777,
    665785,
    661307,
    661311,
    661315,
    661322,
    661324,
    661330,
    661342,
    661344,
    686455,
    686468,
    686474,
    686477,
    686489,
    675908,
    675915,
    675936,
    675939,
    675940,
    675943,
    675945,
    681153,
    681167,
    681172,
    681176,
    681183,
    681185,
    681186,
    681190,
    681191,
    681197,
    681198,
    686763,
    686768,
    686795,
    686796,
    741202,
    746301,
    716601,
    720852,
    726151,
    714101,
    735402,
    703301,
    738552,
    721553,
    721554,
    716403,
    716405,
    743802,
    741402,
    741403,
    749501,
    749502,
    718252,
    734953,
    734954,
    735801,
    735802,
    730352,
    745501,
    749751,
    749752,
    740302,
    717351,
    721505,
    729802,
    726901,
    723154,
    749954,
    746353,
    725851,
    721801,
    721803,
    721804,
    721806,
    738307,
    738309,
    738310,
    714251,
    714254,
    714255,
    732904,
    732906,
    742704,
    700253,
    700254,
    700256,
    726654,
    728606,
    728459,
    728460,
    741852,
    736708,
    736709,
    734105,
    734107,
    734108,
    734109,
    734110,
    734114,
    732857,
    720754,
    720755,
    720756,
    720759,
    739602,
    739604,
    748708,
    738652,
    738656,
    742253,
    749908,
    742554,
    742556,
    742560,
    734509,
    734510,
    724951,
    724952,
    724956,
    729754,
    729755,
    729756,
    729758,
    745203,
    745204,
    745214,
    722651,
    712704,
    712719,
    720004,
    720006,
    720011,
    748102,
    724651,
    724656,
    724662,
    747051,
    747058,
    745120,
    744756,
    744760,
    744766,
    745553,
    745558,
    745563,
    740605,
    740606,
    740608,
    740618,
    740619,
    705953,
    705954,
    705957,
    705958,
    705960,
    721752,
    721761,
    721762,
    721769,
    721770,
    721771,
    716055,
    716060,
    716062,
    747206,
    747207,
    747216,
    747218,
    747220,
    741801,
    741811,
    744908,
    744910,
    744912,
    744913,
    744926,
    707201,
    707203,
    707204,
    707206,
    707218,
    707219,
    747604,
    744052,
    744057,
    744068,
    744069,
    744072,
    723370,
    723377,
    724605,
    724606,
    724608,
    724611,
    724613,
    724622,
    724624,
    724627,
    739669,
    739673,
    739677,
    739680,
    707003,
    707007,
    730955,
    730964,
    730966,
    730968,
    730971,
    730973,
    730978,
    730979,
    743901,
    743903,
    743905,
    743908,
    743915,
    743917,
    743922,
    743930,
    739555,
    739558,
    739570,
    739573,
    739584,
    727057,
    727071,
    746211,
    746221,
    746227,
    711151,
    711153,
    711154,
    711169,
    711180,
    727702,
    727708,
    727710,
    727721,
    727722,
    727730,
    749613,
    749623,
    742905,
    742907,
    742914,
    742917,
    742918,
    742924,
    742929,
    702901,
    702903,
    702908,
    702910,
    702916,
    702917,
    702918,
    702919,
    702923,
    702925,
    702928,
    747801,
    747822,
    747823,
    747825,
    747828,
    747838,
    747839,
    747840,
    743756,
    743761,
    743764,
    743777,
    743779,
    743781,
    728809,
    728823,
    728826,
    728835,
    728836,
    728839,
    738258,
    738261,
    738262,
    738263,
    738270,
    738278,
    738283,
    736903,
    736911,
    736913,
    736921,
    736931,
    736938,
    748416,
    748417,
    748419,
    748422,
    748426,
    748434,
    737457,
    737459,
    737460,
    737468,
    737469,
    737478,
    737491,
    737493,
    714157,
    714158,
    714159,
    714165,
    714167,
    714168,
    714172,
    714179,
    714180,
    714183,
    714187,
    736955,
    736959,
    736964,
    736968,
    736969,
    736970,
    736978,
    736979,
    736990,
    737609,
    737613,
    737615,
    737618,
    737621,
    737625,
    737631,
    737633,
    737634,
    737637,
    737639,
    737642,
    747361,
    747367,
    747369,
    747376,
    747382,
    747386,
    747389,
    712506,
    712528,
    712530,
    712536,
    712540,
    712548,
    747153,
    747154,
    747155,
    747157,
    747158,
    747179,
    747183,
    747184,
    788451,
    799251,
    780951,
    754951,
    795102,
    769002,
    765051,
    798601,
    777751,
    777753,
    783651,
    798301,
    794501,
    750701,
    781251,
    794451,
    789302,
    797151,
    797153,
    752001,
    799401,
    755304,
    755306,
    755307,
    755308,
    777152,
    793452,
    789003,
    766852,
    756602,
    756603,
    772603,
    775852,
    771052,
    771053,
    785852,
    783452,
    757301,
    788602,
    796403,
    796405,
    797052,
    791652,
    768655,
    768656,
    791601,
    777356,
    796853,
    756106,
    783702,
    765806,
    773002,
    773004,
    773005,
    777055,
    777056,
    777057,
    790806,
    790807,
    752603,
    752604,
    787301,
    787305,
    787306,
    786852,
    786854,
    786858,
    796703,
    796707,
    777652,
    788401,
    769701,
    769704,
    769706,
    789804,
    789805,
    763356,
    763357,
    751704,
    789402,
    755404,
    797704,
    797707,
    751652,
    751658,
    751659,
    750503,
    750508,
    784056,
    784061,
    784062,
    784063,
    750902,
    750904,
    750905,
    750906,
    796206,
    796208,
    796210,
    796212,
    790652,
    787556,
    787558,
    787559,
    795852,
    795855,
    795859,
    752051,
    752060,
    798457,
    798460,
    798462,
    784356,
    799555,
    788258,
    788262,
    788266,
    781354,
    781360,
    772254,
    772259,
    772267,
    793251,
    793253,
    793259,
    793260,
    792758,
    789757,
    789760,
    793401,
    793402,
    793408,
    793413,
    793414,
    793415,
    792359,
    792366,
    783059,
    783060,
    783063,
    783065,
    753053,
    753056,
    753058,
    779501,
    779511,
    779513,
    786055,
    786056,
    786057,
    786059,
    786061,
    769404,
    769405,
    769407,
    769408,
    769409,
    795707,
    774606,
    774609,
    774610,
    774613,
    773303,
    773310,
    773312,
    788306,
    788318,
    788319,
    780601,
    780607,
    780609,
    799054,
    789702,
    789704,
    789705,
    782206,
    782210,
    766556,
    766561,
    765404,
    765412,
    765413,
    758360,
    767212,
    767221,
    778109,
    778111,
    778116,
    760512,
    760517,
    753405,
    752803,
    752804,
    752805,
    752810,
    752812,
    752818,
    752819,
    757701,
    757707,
    757709,
    757710,
    757718,
    779102,
    779111,
    779112,
    794310,
    777851,
    777862,
    777863,
    755003,
    755005,
    755016,
    770452,
    770454,
    770470,
    769501,
    769503,
    769515,
    769853,
    769860,
    769870,
    778011,
    778012,
    778353,
    778358,
    778373,
    777402,
    777408,
    777412,
    777414,
    752107,
    769651,
    769656,
    769659,
    769660,
    769663,
    768405,
    768406,
    768413,
    768414,
    768422,
    796055,
    796058,
    796064,
    772801,
    772802,
    772807,
    772813,
    772819,
    772821,
    791103,
    791108,
    791114,
    771503,
    797656,
    768905,
    768911,
    768917,
    768919,
    768921,
    794005,
    794007,
    794010,
    794018,
    794028,
    794035,
    795951,
    795959,
    795965,
    795968,
    795973,
    780001,
    780003,
    780024,
    785452,
    785456,
    785463,
    785468,
    750603,
    750613,
    750615,
    750621,
    750627,
    783754,
    783766,
    783780,
    781852,
    781858,
    781866,
    781867,
    781868,
    781872,
    781873,
    784252,
    784255,
    784259,
    784261,
    784278,
    750568,
    750570,
    750573,
    784806,
    784809,
    784815,
    784818,
    784823,
    784825,
    784827,
    754757,
    754760,
    754763,
    754777,
    754779,
    770661,
    770662,
    770678,
    770681,
    770683,
    762004,
    762006,
    762007,
    762008,
    762013,
    762017,
    762022,
    762026,
    762029,
    773353,
    773354,
    773359,
    773363,
    762701,
    762703,
    762708,
    762709,
    762722,
    782902,
    782905,
    782906,
    782915,
    782916,
    782921,
    782928,
    784002,
    784011,
    784016,
    784019,
    784023,
    784025,
    784035,
    757403,
    757407,
    757408,
    757415,
    757420,
    757429,
    757442,
    751803,
    751809,
    751815,
    751817,
    751825,
    751829,
    751062,
    751074,
    751083,
    751086,
    751087,
    751090,
    751091,
    781051,
    781052,
    781053,
    781055,
    781058,
    781060,
    781061,
    781065,
    781072,
    781073,
    783372,
    783373,
    783377,
    783388,
    783389,
    783390,
    783391,
    794604,
    794610,
    794612,
    794617,
    794631,
    794636,
    794646,
    769301,
    769305,
    769307,
    769311,
    769319,
    769321,
    769328,
    769334,
    769339,
    769341,
    769342,
    769345,
    769349,
    768261,
    768272,
    768276,
    768283,
    768285,
    768287,
    767655,
    767656,
    767666,
    767667,
    767668,
    767672,
    767679,
    767454,
    767456,
    767457,
    767458,
    767471,
    767474,
    767480,
    767483,
    767492,
    767494,
    755162,
    755163,
    755165,
    755170,
    755173,
    755179,
    755187,
    751856,
    751858,
    751859,
    751867,
    751873,
    751881,
    751883,
    751884,
    751898,
    770601,
    770608,
    770610,
    770617,
    770625,
    770627,
    790217,
    790221,
    790244,
    790249,
    767602,
    767608,
    767619,
    767622,
    767623,
    767624,
    767625,
    767628,
    767636,
    767639,
    782453,
    782471,
    782487,
    782494,
    759002,
    759010,
    759026,
    759032,
    759035,
    756701,
    756706,
    756720,
    756731,
    756737,
    756741,
    756742,
    756745,
    756748,
    793752,
    793757,
    793758,
    793760,
    793762,
    793763,
    793775,
    793779,
    793788,
    793789,
    793799,
    777503,
    777506,
    777507,
    777508,
    777510,
    777511,
    777516,
    777521,
    777523,
    777532,
    777533,
    777537,
    777538,
    777549,
    750052,
    750053,
    750054,
    750056,
    750059,
    750065,
    750077,
    750079,
    750089,
    757503,
    757510,
    757523,
    757528,
    757530,
    757532,
    757537,
    757538,
    757549,
    771658,
    771661,
    771666,
    771672,
    771675,
    780853,
    780858,
    780861,
    780876,
    780890,
    780892,
    766404,
    766414,
    766431,
    766436,
    767302,
    767303,
    767304,
    767305,
    767312,
    767322,
    767326,
    767327,
    767333,
    767336,
    767341,
    767346,
    767347,
    767349,
    759652,
    759653,
    759656,
    759689,
    759692,
    759693,
    765957,
    765962,
    765963,
    765967,
    765970,
    765973,
    765980,
    765986,
    765988,
    794354,
    794356,
    794360,
    794377,
    794387,
    794393,
    794394,
    794395,
    766207,
    766209,
    766216,
    766220,
    766221,
    766235,
    766243,
    796451,
    796460,
    796475,
    796497,
    761911,
    761913,
    761921,
    761929,
    761945,
    775606,
    775614,
    775628,
    775630,
    775631,
    775632,
    775633,
    775634,
    775636,
    775639,
    775647,
    788102,
    788105,
    788111,
    788120,
    788128,
    788133,
    788139,
    788143,
    792647,
    777904,
    777905,
    777911,
    777918,
    777919,
    777920,
    777923,
    777926,
    777935,
    777941,
    777942,
    777943,
    760599,
    753325,
    753329,
    753331,
    753341,
    753342,
    753343,
    753346,
    753347,
    786805,
    786807,
    786819,
    786820,
    786826,
    786828,
    786829,
    786845,
    786849,
    774254,
    774257,
    774258,
    774284,
    774287,
    774290,
    774460,
    774464,
    774466,
    774473,
    774479,
    774483,
    782854,
    782855,
    782863,
    782865,
    782880,
    782883,
    782886,
    782889,
    782891,
    782899,
    752452,
    752454,
    752463,
    752469,
    752475,
    752477,
    752479,
    752480,
    752485,
    752486,
    752490,
    752492,
    752499,
    768809,
    768810,
    768814,
    768816,
    768828,
    768829,
    768830,
    768839,
    768842,
    768844,
    768845,
    768849,
    792663,
    792667,
    792671,
    792672,
    792682,
    792683,
    792690,
    792692,
    780108,
    780109,
    780112,
    780122,
    780123,
    780139,
    780143
  ];

  Color col = Colors.black38;

  Future<ImageData> getImageData(html.ImageElement image) async {
    html.CanvasElement canvas =
        html.CanvasElement(width: image.width, height: image.height);
    html.CanvasRenderingContext2D context = canvas.getContext('2d');
    context.drawImage(image, 0, 0);
    return context.getImageData(0, 0, image.width, image.height);
  }

  Rect roundedRect(Rect rect) {
    int left = (rect.left / 2).floor() * 2;
    int top = (rect.top / 2).floor() * 2;
    int right = (rect.right / 2).ceil() * 2;
    int bottom = (rect.bottom / 2).ceil() * 2;
    return Rect.fromLTRB(
        left.toDouble(), top.toDouble(), right.toDouble(), bottom.toDouble());
  }

  /* Future<Color> generatePalette(String url) async {
    var dominantColor, firstColor;
    try {
      ImageProvider imageProvider = NetworkImage(url);
      PaletteGenerator paletteGenerator =
          await PaletteGenerator.fromImageProvider(imageProvider,
              maximumColorCount: 5);
      dominantColor = paletteGenerator.dominantColor.color;
      List<Color> topColors = paletteGenerator.colors.toList();
      firstColor = topColors[0];
    } catch (Exception) {
      print(Exception.toString());
    }
    return col;
  } */

  Future<PaletteGenerator> generatePalette(html.ImageElement image) async {
    ImageData imageData = await getImageData(image);
    Rect visibleRect =
        Rect.fromLTWH(0, 0, image.width.toDouble(), image.height.toDouble());
    Rect roundedVisibleRect = roundedRect(visibleRect);
    ui.Image resizedImage = await decodeImageFromPixels(
        imageData.data.buffer.asUint8List(), imageData.width, imageData.height);

    ui.Image croppedImage = await cropImage(resizedImage, roundedVisibleRect);
    return PaletteGenerator.fromImage(croppedImage);
  }

  Future<List<String>> extractData(int k) async {
    // Getting the response from the targeted url
    final response = await http.Client().get(Uri.parse(
        'http://www.saatchiart.com/account/artworks/${users.elementAt(k)}'));

    DatabaseReference db =
        FirebaseDatabase.instance.ref("users/" + users.elementAt(k).toString());

    // Status Code 200 means response has been received successfully
    if (response.statusCode == 200) {
      // Getting the html document from the response
      var document = parser.parse(response.body);
      int counter = 0;
      try {
        // Scraping the first article title
        List list = [];
        var classlor = document
            .getElementsByClassName("sc-1ypbzzj-4 sc-9pmg3r-2 cgnOZJ kpSjBp");
        var usagers = document.getElementsByTagName('img');
        var nom, avatar;

        for (var usager in usagers) {
          var fl = usager.attributes['src'];

          if (fl != null && fl.contains(RegExp(r'^http.*\.(jpg|png|jpeg)'))) {
            nom = usager.attributes['alt'];
            avatar = usager.attributes['src'];
            break;
          }
        }
        list.add(nom);
        list.add(avatar);

        for (var h = 0; h < classlor.length; h++) {
          var oeuvre, dimension, imageUrl;
          var case1 = classlor[h].children[0];
          var img = case1.getElementsByTagName("img");
          var h2 = case1.getElementsByTagName("h2");
          var h4 = case1.getElementsByTagName("h4")[0].children;

          for (var image in img) {
            imageUrl = (image.attributes['src'] != null)
                ? image.attributes['src']
                : image.attributes['data-src'];
          }

          for (var h21 in h2) {
            oeuvre ??= h21.text;
          }

          for (var h41 in h4) {
            dimension ??= h41.text;
          }

          if (imageUrl != null) {
            if (imageUrl.startsWith(RegExp(r'^http.*\.(jpg|png|jpeg)'))) {
              html.ImageElement image = html.ImageElement(
                  src:
                      'https://i.pinimg.com/736x/aa/be/42/aabe42b5ab769266d9cf575fea5ff4aa.jpg');
              await image.onLoad.first;
              PaletteGenerator palette = await generatePalette(image);

              /* var paletteGenerator = await generatePalette(imageUrl);
              print(paletteGenerator.value); */

              counter++;
              list.add(counter);
              list.add(oeuvre);
              list.add(imageUrl.toString());
              list.add(dimension);
            }
          }
        }

        print(list.toString());

        return [nom.toString()];
      } catch (Exception) {
        return ['', '', 'ERROR!'];
      }
    }
    return ['', '', 'ERROR STATUS CODE WASNT 200!'];
  }

  @override
  Widget build(BuildContext context) {
    return Scaffold(
      body: Padding(
        padding: const EdgeInsets.all(16.0),
        child: Center(
            child: Column(
          mainAxisAlignment: MainAxisAlignment.center,
          children: [
            // if isLoading is true show loader
            // else show Column of Texts
            isLoading
                ? const CircularProgressIndicator()
                : Column(
                    children: [
                      Text(result1,
                          style: const TextStyle(
                              fontSize: 20, fontWeight: FontWeight.bold)),
                      SizedBox(
                        height: MediaQuery.of(context).size.height * 0.05,
                      ),
                    ],
                  ),
            SizedBox(height: MediaQuery.of(context).size.height * 0.08),
            MaterialButton(
              onPressed: () async {
                // Setting isLoading true to show the loader
                setState(() {
                  isLoading = true;
                });

                final response = [];
                // Awaiting for web scraping function
                // to return list of strings
                for (int k = 0; k < users.length; k++) {
                  response.add(await extractData(k));
                }

                // Setting the received strings to be
                // displayed and making isLoading false
                // to hide the loader
                setState(() {
                  result1 = response[0];
                  isLoading = false;
                });
              },
              color: Colors.green,
              child: const Text(
                'Scrap Data',
                style: TextStyle(color: Colors.white),
              ),
            )
          ],
        )),
      ),
    );
  }
}
